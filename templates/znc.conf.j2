// Custom generated by Ansible

{% for module in znc_global_modules %}
LoadModule = {{ module }}
{% endfor %}
MaxBufferSize = {{ znc_max_buffer_size }}
SSLCertFile = {{ znc_ssl_certfile }}
Version = {{ znc_install_version }}

<Listener l>
    IPv4 = {{ znc_ipv4 | bool }}
    IPv6 = {{ znc_ipv6 | bool }}
    Host = {{ znc_host }}
    Port = {{ znc_port }}
    SSL = {{ znc_ssl | bool}}
</Listener>

{% for user in znc_users %}
<User {{ user.name }}>
    Allow        = {{ user.allow | default("*") }}
    Admin        = {{ user.admin | default(False) | bool }}
    AltNick      = {{ user.altnick | default(user.nick+"_") }}
    AutoClearChanBuffer = {{ user.autoclearchanbuffer | default(True) | bool }}
    AutoClearQueryBuffer = {{ user.autoclearquerybuffer | default(True) | bool }}
    Buffer       = {{ user.buffer | default(znc_max_buffer_size) }}
    ChanModes    = {{ user.chanmodes | default("+stn") }}
    Ident        = {{ user.ident | default(user.nick) }}
{% if user.modules is defined %}
{% for module in user.modules %}
    LoadModule   = {{ module }}
{% endfor %}
{% endif %}
    MultiClients = {{ user.multiclients | default(False) | bool }}
    Nick         = {{ user.nick }}
    RealName     = {{ user.realname }}
{% if user.networks is defined %}
{% for network_name, network in user.networks.iteritems() %}

    <Network {{ network_name }}>
{% if network.modules is defined %}
{% for module in network.modules %}
        LoadModule = {{ module }}
{% endfor %}
{% endif %}
        Server     = {{ network.server }} {{ "+" if network.ssl else "" }}{{ network.port }} {{ network.password | default("") }}
{% if network.channels is defined %}
{% for channel in network.channels %}

        <Chan {{ channel }}>
        </Chan>
{% endfor %}
{% endif %}
    </Network>
{% endfor %}
{% endif %}

    <Pass password>
        Hash   = {{ user.password.hash }}
        Method = {{ user.password.method }}
        Salt   = {{ user.password.salt }}
    </Pass>
</User>
{% endfor %}
